{\rtf1\ansi\deflang1033{\fonttbl{\f5\fcharset0 Arabic Typesetting;}{\f6\fcharset0 Arial;}{\f11\fcharset0 Browallia New;}{\f12\fcharset0 BrowalliaUPC;}{\f129\fcharset2 Symbol;}{\f131\fcharset0 Times New Roman;}{\f137\fcharset0 Verdana;}{\f192\fcharset0 Courier;}{\f193\fcharset0 ArialMT;}{\f194\fcharset0 Times-Roman;}{\f195\fcharset0 Monaco;}{\f196\fcharset0 Courier-Bold;}}{\colortbl;\red83\green83\blue83;\red83\green85\blue2;\red0\green0\blue117;\red38\green38\blue38;\red46\green111\blue253;\red84\green116\blue154;}{\stylesheet{\snext0\f6\fs20\fi0\li0\ri0\ql{\*\stloverrides\f6\fs20} Normal;}{\*\cs1\additive Default Paragraph Font;}{\*\cs2\additive\sbasedon1\super Footnote Reference;}{\*\cs3\additive\sbasedon1\super Endnote Reference;}}{\*\listtable{\list{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u8226 ?;}{\levelnumbers ;}\levelfollow0\fi-360\li720}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}\listid65536}{\list{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u8226 ?;}{\levelnumbers ;}\levelfollow0\fi-360\li720}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}\listid65537}{\list\listsimple{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u61623 ?;}{\levelnumbers ;}\levelfollow0\f129\fi-360\li720}\listid65538}}{\*\listoverridetable{\listoverride\listid65536\listoverridecount0\ls1}{\listoverride\listid65537\listoverridecount0\ls2}{\listoverride\listid65538\listoverridecount0\ls3}}{\*\generator Atlantis Word Processor 2.0.1.0;}{\info{\operator mhicks}{\creatim\yr2016\mo3\dy25\hr13\min1\sec2}{\revtim\yr2017\mo3\dy12\hr15\min31\sec44}}\htmautsp\useltbaln\alntblind\ftnbj\ftnnar\aenddoc\aftnnrlc\paperw12240\paperh15840\margl1440\margr1440\margt187\margb1440\pgndec\pgncont\sftnbj\sftnstart1\sftnrstcont\sftnnar\saftnstart1\saftnrstcont\saftnnrlc\sectfullsaved\fet0\pard\plain\f131\fs24\sl390\slmult0\f192\fs26 Kerboeros Notes:\\pard\List kerberos:\$klist -e -k -t /etc/security/keytab/nn.service.keytab\\ul\\f137\b Mapping from Kerberos principal to OS user account\ulnone\\f6\fs24\b0 Hadoop maps Kerberos principal to OS user account using the rule specified by hadoop.security.auth_to_local which works in the same way as the auth_to_local in {\cf6{\field{\*\fldinst{\f6  HYPERLINK "http://web.mit.edu/Kerberos/krb5-latest/doc/admin/conf_files/krb5_conf.html" }}{\fldrslt{\f6\cf6 Kerberos configuration file (krb5.conf)}}}}\cf6\cf0 . In addition, Hadoop auth_to_local mapping supports the {\b /L} flag that lowercases the returned name.\By default, it picks the first component of principal name as a user name if the realms matches to the default_realm (usually defined in /etc/krb5.conf). For example,host/full.qualified.domain.name@REALM.TLD is mapped to host by default rule.\\b k5start{\b0  obtains and caches an initial Kerberos ticket-granting ticket for a principal. }k5start{\b0  can be used as an alternative to}kinit\b0 , but it is primarily intended to be used by programs that want to use a keytab to obtain Kerberos credentials, such as a web server that needs to authenticate to another service such as an LDAP server.\fs20\\tx720\f193\fs28\\pard\f194\b\ul Subject: 3.3. How do I use renewable tickets?\ulnone\\f6\fs24\b0 First, you have to get a renewable ticket; you can do this using the -r flag to kinit.\Once this is done, you can renew your ticket using the -R option to kinit. Note that you have to renew your ticket before the ticket expires.\fs20\\sl390\slmult0\f192\fs26\\sl320\slmult0\f195\fs32\cf1 # usermod -a -G ftp tony\\sl390\slmult0\f192\fs26\cf0\\f196\b\ul ADDING A USER/GROUP TO A FACL:\ulnone\\f192\b0  \\sl480\slmult0\sa320 hdfs dfs {\cf2 -}setfacl {\cf2 -}m -R \cf3 group\cf2 :{\cf0 nifi}:{\cf0 r}wx{\cf0  }/\cf0 data/final/test\{\listtext\pard\plain\f131\fs24\f137\cf4\u8226?\tab}\pard\fi-720\li720\tx220\tx720\ls1\fs24\cf4 hadoop fs -setfacl --set user::rw-,user:hadoop:rw-,group::r--,other::r-- /data/final/test\f137\{\listtext\pard\plain\f131\fs24\f192\cf4\u8226?\tab}\ls2\f192 hdfs dfs -setfacl -m default:user:hadoop:r-x /dir\\pard\sl400\slmult0\f193\fs30\ul\cf0\Set Default:\ulnone\fs26\cf5\\pard\tx720\f11\fs24\cf4 hadoop fs -setfacl --set user::rwx,user:nifi:rwx,group::r--,other::--- /data/test1\\pard\sl400\slmult0\fs30\cf0 hdfs dfs -setfacl -m -R default:user:{\fs26 nifi}:rwx,default:group:{\fs26 nifi}:rwx /\fs26 data/test1\fs24\cf4\\fs30\cf0 hdfs dfs -setfacl -m -R default:user:{\fs26 bob}:rwx,default:group:grp_{\fs26 hadoop}:rwx {\fs26 /data/test1}\\pard\fs24\cf4 hdfs dfs -setfacl -m -R  user:nifi:rwx /data/final/\fs30\cf0\\sl400\slmult0 hdfs dfs -setfacl default:user:{\fs26 hdfs}:rwx,default:group:{\fs26 hadoop}:rwx \fs26 /data/final/test1\fs24\\fs30 hdfs dfs -setfacl \~--set \~user::rwx,user:{\fs26 nifi}:rwx,group::rwx,other::--- \~\fs26 /data/final/test2\fs24\\pard\fs30 hdfs dfs -setfacl \~--set \~user::rwx,user:{\fs26 nifi}:rwx,group::rwx,other::--- \~\fs26 /data/final/test3\\\\fs36\b\ul todo:\ulnone\b0\fs26  \\sa20 /data/final/\own /data/final hdfs:hadoop\change /data/final hdfs:hadoop\************************************************\f12\\sl480\slmult0 -m : modify the existing ACL (leaving intact)\-k : remove the default ACL\\sl390\slmult0 hdfs dfs {\cf2 -}setfacl {\cf2 -}m -R \cf3 default{\cf2 :}group\cf2 :{\cf0 nifi}:{\cf0 r}w{\cf0 x }/\cf0 data/final\\SET DEFAULT\\pard\sa20\fs30 hdfs dfs -setfacl -R --set  user::rwx,user:nifi:rwx,group::r--,other::r-- /test\\\sl400\slmult0 hdfs dfs -setfacl -R --set  user::rwx,user:nifi:rwx,group::r--,other::r-- /test\fs24\\\fs30 hdfs dfs -setfacl -R --set  user::rwx,user:nifi:rwx,group::r--,other::r-- /test\fs24\\pard\sa20\fs26\\sl400\slmult0\fs30 hdfs dfs -setfacl -m -R default:user:{\fs26 nifi}:rwx,default:group:{\fs26 nifi}:rwx /\fs26 test/dir1\\b will not change ownership or permissions\b0\fs24\\pard\sa20\\sl400\slmult0\fs30 hdfs dfs -setfacl \~--set \~user::r--,user:{\fs26 nifi}:rwx,group::rwx,other::r-- \~\fs26 /test/dir2\tests not owner - still accessible \\f193\\\\sa0\b\ul COMMANDS:\b0\ulnone\\f5\fs36  \cf1 hdfs dfs -{\b getfacl} [-R] <path>\\sl346\slmult0 hdfs dfs -{\b setfacl} [-R] [-b|-k -m|-x <acl_spec> <path>]|[--set <acl_spec> <path>]\\<path>: Path to the file or directory for which ACLs should be set.\-R: Use this option to recursively list ACLs for all files and directories.\-b: Revoke all permissions except the base ACLs for user, groups and others.\-k: Remove the default ACL.\-m: Add new permissions to the ACL with this option. Does not affect existing permissions.\-x: Remove only the ACL specified.\<acl_spec>: Comma-separated list of ACL permissions.\--set: Use this option to completely replace the existing ACL for the path specified. \       Previous ACL entries will no longer apply.\\<!-- To give user ben read & write permission over /user/hdfs/file -->\{\listtext\pard\plain\f131\fs24\jclisttab\tx720\f129\fs36\cf1\u-3913?\f5\tab}\fi-360\li720\jclisttab\tx720\ls3 hdfs dfs -setfacl -m user:nifi:rw- /test/dir1/testfile1\\pard\sl346\slmult0\<!-- To remove user alice's ACL entry for /user/hdfs/file -->\{\listtext\pard\plain\f131\fs24\jclisttab\tx720\f129\fs36\cf1\u-3913?\f5\tab}\fi-360\li720\jclisttab\tx720\ls3 hdfs dfs -setfacl -x user:alice /user/hdfs/file\\pard\sl346\slmult0\<!-- To give user hadoop read & write access, and group or others read-only access --> \{\listtext\pard\plain\f131\fs24\jclisttab\tx720\f129\fs26\cf1\u-3913?\f192\tab}\fi-360\li720\jclisttab\tx720\ls3 hdfs dfs -setfacl --set user:hadoop:rw-,group::r--,other::r-- /user/hdfs/file\fs26\f192\\pard\sl346\slmult0\\}