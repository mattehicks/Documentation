{\rtf1\ansi\deflang1033{\fonttbl{\f6\fcharset0 Arial;}{\f131\fcharset0 Times New Roman;}}{\colortbl;\red102\green102\blue102;\red67\green67\blue67;\red0\green0\blue0;\red17\green85\blue204;}{\stylesheet{\snext0\f6\fs22\cf3\fi0\li0\sl276\slmult1\ri0\ql\widctlpar{\*\stloverrides\f6\fs22\cf3\sl276\slmult1\widctlpar} Normal;}{\s1\sbasedon0\snext0\f6\fs40\cf3\fi0\li0\sl276\slmult1\ri0\ql\keepn\keep\widctlpar\sb400\sa120{\*\stloverrides\fs40\keepn\keep\sb400\sa120\outlinelevel0} heading 1;}{\s2\sbasedon0\snext0\f6\fs32\cf3\fi0\li0\sl276\slmult1\ri0\ql\keepn\keep\widctlpar\sb360\sa120{\*\stloverrides\fs32\keepn\keep\sb360\sa120\outlinelevel1} heading 2;}{\s3\sbasedon0\snext0\f6\fs28\cf2\fi0\li0\sl276\slmult1\ri0\ql\keepn\keep\widctlpar\sb320\sa80{\*\stloverrides\fs28\cf2\keepn\keep\sb320\sa80\outlinelevel2} heading 3;}{\s4\sbasedon0\snext0\f6\fs24\cf1\fi0\li0\sl276\slmult1\ri0\ql\keepn\keep\widctlpar\sb280\sa80{\*\stloverrides\fs24\cf1\keepn\keep\sb280\sa80\outlinelevel3} heading 4;}{\s5\sbasedon0\snext0\f6\fs22\cf1\fi0\li0\sl276\slmult1\ri0\ql\keepn\keep\widctlpar\sb240\sa80{\*\stloverrides\cf1\keepn\keep\sb240\sa80\outlinelevel4} heading 5;}{\s6\sbasedon0\snext0\f6\fs22\i\cf1\fi0\li0\sl276\slmult1\ri0\ql\keepn\keep\widctlpar\sb240\sa80{\*\stloverrides\i\cf1\keepn\keep\sb240\sa80\outlinelevel5} heading 6;}{\s7\sbasedon0\snext7\f6\fs52\cf3\fi0\li0\sl276\slmult1\ri0\ql\keepn\keep\widctlpar\sa60{\*\stloverrides\fs52\keepn\keep\sa60} Title;}{\s8\sbasedon0\snext8\f6\fs30\cf1\fi0\li0\sl276\slmult1\ri0\ql\keepn\keep\widctlpar\sa320{\*\stloverrides\fs30\cf1\keepn\keep\sa320} Subtitle;}{\*\cs9\additive Default Paragraph Font;}{\*\cs10\additive\sbasedon9\super Footnote Reference;}{\*\cs11\additive\sbasedon9\super Endnote Reference;}}{\*\listtable{\list{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u9679 ?;}{\levelnumbers ;}\levelfollow0\ulnone\fi-360\li720}{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u9675 ?;}{\levelnumbers ;}\levelfollow0\ulnone\fi-360\li1440}{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u9632 ?;}{\levelnumbers ;}\levelfollow0\ulnone\fi-180\li2160}{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u9679 ?;}{\levelnumbers ;}\levelfollow0\ulnone\fi-360\li2880}{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u9675 ?;}{\levelnumbers ;}\levelfollow0\ulnone\fi-360\li3600}{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u9632 ?;}{\levelnumbers ;}\levelfollow0\ulnone\fi-180\li4320}{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u9675 ?;}{\levelnumbers ;}\levelfollow0\ulnone\fi-360\li5760}{\listlevel\levelstartat1\levelnfc23\leveljc0{\leveltext \'01\u9632 ?;}{\levelnumbers ;}\levelfollow0\ulnone\fi-180\li6480}{\listlevel\levelstartat1\levelnfc0\leveljc0{\leveltext \'00;}{\levelnumbers ;}\levelfollow0}\listid65536}}{\*\listoverridetable{\listoverride\listid65536\listoverridecount0\ls1}}{\*\generator Atlantis Word Processor 2.0.1.0;}{\info{\operator mhicks}{\creatim\yr2015\mo12\dy21\hr12\min1\sec6}{\revtim\yr2017\mo3\dy12\hr15\min12\sec21}}\htmautsp\useltbaln\alntblind\ftnbj\ftnnar\aenddoc\aftnnrlc\paperw12240\paperh15840\margl1440\margr1440\margt1440\margb1440\headery708\footery708\pgndec\pgncont\sftnbj\sftnstart1\sftnrstcont\sftnnar\saftnstart1\saftnrstcont\saftnnrlc\sectfullsaved\fet0\pard\plain\f131\fs24\sl276\slmult1\nowidctlpar\widctlpar\f6\fs22\cf3\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}\fi-360\li720\tx360\tx720\ls1 on master install postgresql and ambari-server\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\pard\fi-360\li1440\sl276\slmult1\nowidctlpar\widctlpar\tx1080\tx1440\ls1\ilvl1 wget -P /etc/yum.repos.d http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.1.2.1/ambari.repo\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}yum install --assumeyes postgresql94-server\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}yum install -y ambari-server\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}\pard\fi-360\li720\sl276\slmult1\nowidctlpar\widctlpar\tx360\tx720\ls1 set up ambari DB\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\pard\fi-360\li1440\sl276\slmult1\nowidctlpar\widctlpar\tx1080\tx1440\ls1\ilvl1 see doc at {\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6\ul\cf4 http}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 ://}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 docs}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 .}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 hortonworks}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 .}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 com}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 /}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 HDPDocuments}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 /}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 Ambari}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 -2.1.2.1/}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 bk}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 _}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 ambari}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 _}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 reference}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 _}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 guide}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 /}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 content}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 /}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 ch}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 _}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 amb}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 _}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 ref}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 _}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 using}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 _}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 non}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 _}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 default}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 _}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 databases}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 .}}}}\cf4\ul\ulnone\cf3{\ul\cf4{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/ch_amb_ref_using_non_default_databases.html" }}{\fldrslt{\f6 html}}}}\cf4\ul\cf3\ulnone\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}systemctl enable postgresql-9.4\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}systemctl start postgresql-9.4\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}mkdir -p /storage/pgsqldb/9.4/data\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}chown -R postgres:postgres /storage/pgsqldb/9.4/data\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}cd /usr/pgsql-9.4/bin/\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\sl331\slmult1 su postges\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}./initdb -D /storage/pgsqldb/9.4/data\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}cp /lib/systemd/system/postgresql-9.4.service /etc/systemd/system/\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}vim  /etc/systemd/system/postgresql-9.4.service\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}\pard\fi-360\li2160\sl331\slmult1\nowidctlpar\widctlpar\tx1800\tx2160\ls1\ilvl2 PGDATA= /storage/pgsqldb/9.4/data\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\pard\fi-360\li1440\sl331\slmult1\nowidctlpar\widctlpar\tx1080\tx1440\ls1\ilvl1 systemctl enable postgresql-9.4.service\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}systemctl start postgresql-9.4.service\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\sl276\slmult1 su postgres\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}psql HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html"\ul\cf4 http{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 ://}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 docs}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 .}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 hortonworks}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 .}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 com}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 /}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 HDPDocuments}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 /}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 Ambari}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 -2.1.2.1/}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 bk}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 ambari}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 reference}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 guide}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 /}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 content}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 /_}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 using}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 ambari}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 with}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 postgresql}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 .}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_ambari_with_postgresql.html" }}{\fldrslt{\f6 html}}}}\cf3\ulnone\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}su postgres\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}psql\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}postgres=# CREATE DATABASE ambaridb;\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}postgres=# CREATE USER horton WITH PASSWORD 'xxxxxx';\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}postgres=# GRANT ALL PRIVILEGES ON DATABASE ambaridb TO horton;\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}GRANT\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}postgres=# \\connect ambaridb;\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}ambaridb=# CREATE SCHEMA drschema AUTHORIZATION horton;\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}ambaridb=# ALTER SCHEMA drschema OWNER TO horton;\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}ambaridb=# ALTER ROLE horton SET search_path to 'drschema', 'public';\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}exit and su root\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}psql -U horton -d ambaridb\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\\connect ambaridb\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\\i /var/lib/ambari-server/resources/Ambari-DDL-Postgres-CREATE.sql;\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}\pard\fi-360\li720\sl276\slmult1\nowidctlpar\widctlpar\tx360\tx720\ls1 Create Hive DB\{\listtext\pard\plain\f131\fs24\f6\fs22\cf4\u9675?\tab}\pard\fi-360\li1440\sl276\slmult1\nowidctlpar\widctlpar\tx1080\tx1440\ls1\ilvl1 HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html"\ul\cf4 http{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 ://}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 docs}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 .}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 hortonworks}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 .}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 com}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 /}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 HDPDocuments}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 /}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 Ambari}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 -2.1.2.1/}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 bk}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 ambari}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 reference}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 guide}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 /}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 content}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 /_}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 using}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 hive}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 with}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 _}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 postgresql}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 .}}}}{{\field{\*\fldinst{\f6  HYPERLINK "http://docs.hortonworks.com/HDPDocuments/Ambari-2.1.2.1/bk_ambari_reference_guide/content/_using_hive_with_postgresql.html" }}{\fldrslt{\f6 html}}}}\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\ulnone\cf3 yum install postgresql-jdbc* \{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}chmod 644 /usr/share/java/postgresql-jdbc.jar\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}ambari-server setup --jdbc-db=postgres --jdbc-driver=/usr/share/java/postgresql-jdbc.jar\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}echo "CREATE DATABASE hivedb;" | psql -U postgres\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}echo "CREATE USER drhive WITH PASSWORD ‘xxx’;" | psql -U postgres\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}echo "GRANT ALL PRIVILEGES ON DATABASE hivedb TO drhive;" | psql -U postgres\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}\pard\fi-360\li720\sl276\slmult1\nowidctlpar\widctlpar\tx360\tx720\ls1 Create OOZIE DB\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\pard\fi-360\li1440\sl276\slmult1\nowidctlpar\widctlpar\tx1080\tx1440\ls1\ilvl1 echo "CREATE DATABASE ooziedb;" | psql -U postgres\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}echo "CREATE USER droozie WITH PASSWORD 'xxxxx';" | psql -U postgres\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}echo "GRANT ALL PRIVILEGES ON DATABASE ooziedb TO droozie;" | psql -U postgres\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}\pard\fi-360\li720\sl276\slmult1\nowidctlpar\widctlpar\tx360\tx720\ls1 modify /storage/pgsqldb/9.4/data/pg_hba.conf and add line\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\pard\fi-360\li1440\sl276\slmult1\nowidctlpar\widctlpar\tx1080\tx1440\ls1\ilvl1 host\tab all         \tab all         \tab 10.20.55.0/22        \tab md5\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}host\tab all         \tab all         \tab 10.20.24.0/24        \tab md5\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}\pard\fi-360\li720\sl276\slmult1\nowidctlpar\widctlpar\tx360\tx720\ls1 modify /storage/pgsqldb/9.4/data/postgresql.conf \{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\pard\fi-360\li1440\sl276\slmult1\nowidctlpar\widctlpar\tx1080\tx1440\ls1\ilvl1 add \line listen_addresses = '*'\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}modify\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}\pard\fi-360\li2160\sl276\slmult1\nowidctlpar\widctlpar\tx1800\tx2160\ls1\ilvl2 max_connections = 1000\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}\pard\fi-360\li720\sl276\slmult1\nowidctlpar\widctlpar\tx360\tx720\ls1 systemctl restart postgresql-9.4\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}set up ambari server\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\pard\fi-360\li1440\sl276\slmult1\nowidctlpar\widctlpar\tx1080\tx1440\ls1\ilvl1 ambari-server setup\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}\pard\fi-360\li2160\sl276\slmult1\nowidctlpar\widctlpar\tx1800\tx2160\ls1\ilvl2 setup custom user -- N\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}ambari manage java -- N\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}path to java -- /usr/java/default\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}enter advanced configuration -- y\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}[4] - PostgreSQL\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}Hostname (localhost): bos-rd2-hdp-master1.rd2.hq.YourCompanyDomain.com\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}Port (5432):\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}Database name (ambari): ambaridb\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}Postgres schema (ambari): drschema\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9632?\tab}Username (ambari): horton\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}\pard\fi-360\li720\sl276\slmult1\nowidctlpar\widctlpar\tx360\tx720\ls1\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}start ambari-server\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\pard\fi-360\li1440\sl276\slmult1\nowidctlpar\widctlpar\tx1080\tx1440\ls1\ilvl1 ambari-server start\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9679?\tab}\pard\fi-360\li720\sl276\slmult1\nowidctlpar\widctlpar\tx360\tx720\ls1 note that you sometimes need to restart\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}\pard\fi-360\li1440\sl276\slmult1\nowidctlpar\widctlpar\tx1080\tx1440\ls1\ilvl1 ambari-server restart\{\listtext\pard\plain\f131\fs24\f6\fs22\cf3\u9675?\tab}ambari-agent restart\}